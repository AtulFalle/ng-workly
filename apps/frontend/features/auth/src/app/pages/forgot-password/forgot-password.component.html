<div class="forgot-password-container">
  <div class="forgot-password-card-wrapper">
    <p-card class="forgot-password-card">
      <ng-template pTemplate="header">
        <div class="forgot-password-header">
          <h1>Forgot Password?</h1>
          <p>No worries! Enter your email and we'll send you a reset link.</p>
        </div>
      </ng-template>

      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="forgot-password-form">
        <!-- Email Field -->
        <div class="form-field">
          <label for="email">Email Address</label>
          <input 
            type="email" 
            id="email"
            pInputText 
            formControlName="email"
            placeholder="Enter your email address"
            [class.p-invalid]="isFieldInvalid('email')"
            class="w-full">
          <small 
            *ngIf="isFieldInvalid('email')" 
            class="p-error">
            {{ getFieldError('email') }}
          </small>
        </div>

        <!-- Submit Button -->
        <p-button 
          type="submit"
          label="Send Reset Link"
          icon="pi pi-send"
          [loading]="isLoading()"
          [disabled]="forgotPasswordForm.invalid || isLoading()"
          class="w-full reset-button">
        </p-button>

        <p-divider>
          <span class="p-tag">OR</span>
        </p-divider>

        <!-- Back to Login -->
        <div class="back-to-login">
          <p>Remember your password? 
            <a routerLink="/login" class="login-link-text">Back to login</a>
          </p>
        </div>
      </form>
    </p-card>

    <!-- Success State -->
    <p-card *ngIf="isEmailSent()" class="success-card">
      <ng-template pTemplate="header">
        <div class="success-header">
          <i class="pi pi-check-circle success-icon"></i>
          <h2>Check Your Email</h2>
        </div>
      </ng-template>

      <div class="success-content">
        <p>We've sent a password reset link to:</p>
        <p class="email-address">{{ forgotPasswordForm.get('email')?.value }}</p>
        <p class="instructions">
          Please check your email and click the link to reset your password. 
          The link will expire in 15 minutes.
        </p>

        <div class="success-actions">
          <p-button 
            label="Resend Email"
            icon="pi pi-refresh"
            severity="secondary"
            [outlined]="true"
            (click)="resendEmail()"
            [loading]="isResending()"
            class="w-full">
          </p-button>
          
          <p-button 
            label="Back to Login"
            icon="pi pi-arrow-left"
            severity="secondary"
            [text]="true"
            (click)="backToLogin()"
            class="w-full">
          </p-button>
        </div>
      </div>
    </p-card>
  </div>
</div>

<!-- Toast for notifications -->
<p-toast></p-toast>
