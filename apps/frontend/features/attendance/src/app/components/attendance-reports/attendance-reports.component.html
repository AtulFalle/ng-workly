<!-- Attendance Reports Component -->
<div class="attendance-reports">
  <!-- Header -->
  <div class="reports-header">
    <h1 class="reports-title">Attendance Reports</h1>
    <div class="reports-actions">
      <p-button 
        label="Dashboard" 
        icon="pi pi-home"
        [outlined]="true"
        routerLink="dashboard">
      </p-button>
      <p-button 
        label="Attendance List" 
        icon="pi pi-list"
        [outlined]="true"
        routerLink="list">
      </p-button>
      <p-button 
        label="Generate Report" 
        icon="pi pi-plus"
        (onClick)="handleGenerateReport()">
      </p-button>
    </div>
  </div>

  <!-- Reports Table -->
  <p-card class="reports-card">
    <p-table 
      [value]="reports()"
      [loading]="loading()"
      [paginator]="true"
      [rows]="10"
      [rowsPerPageOptions]="[5, 10, 25, 50]"
      dataKey="id"
      styleClass="p-datatable-sm"
      [scrollable]="true"
      scrollHeight="600px">
      
      <ng-template pTemplate="header">
        <tr>
          <th>Report Name</th>
          <th>Description</th>
          <th>Generated By</th>
          <th>Generated At</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-report>
        <tr>
          <td>
            <div class="report-info">
              <div class="report-name">{{ report.reportName }}</div>
              <div class="report-id">#{{ report.id }}</div>
            </div>
          </td>
          <td>
            <div class="report-description">
              {{ report.description }}
            </div>
          </td>
          <td>{{ report.generatedBy }}</td>
          <td>{{ formatDate(report.generatedAt) }}</td>
          <td>
            <p-badge 
              [value]="getStatusLabel(report.status)" 
              [severity]="getStatusSeverity(report.status)"
              size="small">
            </p-badge>
          </td>
          <td>
            <div class="action-buttons">
              @if (report.status === 'completed' && report.downloadUrl) {
                <p-button 
                  icon="pi pi-download"
                  size="small"
                  [text]="true"
                  pTooltip="Download Report"
                  (onClick)="handleDownloadReport(report)">
                </p-button>
              }
              
              <p-button 
                icon="pi pi-trash"
                size="small"
                [text]="true"
                pTooltip="Delete Report"
                (onClick)="handleDeleteReport(report)">
              </p-button>
            </div>
          </td>
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="6" class="empty-message">
            <div class="empty-state">
              <i class="pi pi-file-pdf"></i>
              <p>No reports found</p>
              <p class="empty-subtitle">Generate your first attendance report</p>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>
</div>

<p-toast></p-toast>
