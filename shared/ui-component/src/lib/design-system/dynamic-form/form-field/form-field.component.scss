.lib-form-field {
  width: 100%;
  max-width: 100%;
  min-width: 0;
  display: block;
  box-sizing: border-box;
  
  // Standardized spacing - Each form field has its own padding
  // This ensures consistent spacing regardless of parent gap
  padding: 0; // Remove padding - let controls handle their own spacing
  margin: 0; // Remove default margins - spacing handled by parent gap
  
  // Grid column spans (1-12 columns)
  &.lib-form-field-col-1 { grid-column: span 1; }
  &.lib-form-field-col-2 { grid-column: span 2; }
  &.lib-form-field-col-3 { grid-column: span 3; }
  &.lib-form-field-col-4 { grid-column: span 4; }
  &.lib-form-field-col-5 { grid-column: span 5; }
  &.lib-form-field-col-6 { grid-column: span 6; }
  &.lib-form-field-col-7 { grid-column: span 7; }
  &.lib-form-field-col-8 { grid-column: span 8; }
  &.lib-form-field-col-9 { grid-column: span 9; }
  &.lib-form-field-col-10 { grid-column: span 10; }
  &.lib-form-field-col-11 { grid-column: span 11; }
  &.lib-form-field-col-12 { grid-column: span 12; }
  
  &.lib-form-field-hidden {
    display: none;
    padding: 0; // Remove padding when hidden
  }
  
  // Spacing variants
  &.lib-form-field-spacing-none {
    padding: 0;
  }
  
  &.lib-form-field-spacing-compact {
    padding: var(--spacing-1); // 4px - Compact field padding
  }
  
  &.lib-form-field-spacing-comfortable {
    padding: var(--spacing-2); // 8px - Default comfortable field padding
  }
  
  &.lib-form-field-spacing-generous {
    padding: var(--spacing-3); // 12px - Generous field padding
  }
  
  // Ensure nested input components use proper spacing
  ::ng-deep {
    lib-input {
      width: 100%;
      display: block;
      
      .lib-input-wrapper {
        width: 100%;
        display: flex;
        flex-direction: column;
        margin: 0; // Remove default margins - spacing handled by parent padding
      }
    }
  }

  // Textarea wrapper styles
  .lib-form-field-textarea-wrapper {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-2);
    width: 100%;
    max-width: 100%;
    min-width: 0;
    box-sizing: border-box;

    .lib-form-field-label {
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-semibold);
      color: var(--text-color);
      margin-bottom: var(--spacing-1);
      display: block;
      line-height: 1.5;

      &.lib-form-field-label-required::after {
        content: ' *';
        color: var(--error-500);
        font-weight: var(--font-weight-bold);
      }
    }

    .lib-form-field-textarea {
      width: 100%;
      max-width: 100%;
      min-width: 0;
      padding: var(--spacing-3) var(--spacing-4);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius-md);
      background-color: var(--surface-0);
      color: var(--text-color);
      font-size: var(--font-size-base);
      font-family: var(--font-family);
      line-height: 1.5;
      resize: vertical;
      min-height: 100px;
      transition: all var(--transition-normal);
      box-sizing: border-box;

      &:focus {
        outline: none;
        border-color: var(--primary-500);
        box-shadow: 0 0 0 2px var(--primary-100);
      }

      &:disabled {
        background-color: var(--surface-100);
        color: var(--text-color-tertiary);
        cursor: not-allowed;
      }

      &.lib-form-field-invalid {
        border-color: var(--error-500);

        &:focus {
          border-color: var(--error-500);
          box-shadow: 0 0 0 2px var(--error-100);
        }
      }
    }

    .lib-form-field-hint {
      font-size: var(--font-size-xs);
      color: var(--text-color-secondary);
      margin-top: var(--spacing-1);
    }

    .lib-form-field-error {
      font-size: var(--font-size-xs);
      color: var(--error-500);
      margin-top: var(--spacing-1);
    }
  }

  // Select wrapper styles
  .lib-form-field-select-wrapper {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-2);
    width: 100%;
    max-width: 100%;
    min-width: 0;
    box-sizing: border-box;

    .lib-form-field-label {
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-semibold);
      color: var(--text-color);
      margin-bottom: var(--spacing-1);
      display: block;
      line-height: 1.5;

      &.lib-form-field-label-required::after {
        content: ' *';
        color: var(--error-500);
        font-weight: var(--font-weight-bold);
      }
    }

    .lib-form-field-select-container {
      position: relative;
      width: 100%;
      max-width: 100%;
      min-width: 0;
      box-sizing: border-box;

      .lib-form-field-select {
        width: 100%;
        max-width: 100%;
        min-width: 0;
        padding: var(--spacing-3) var(--spacing-10) var(--spacing-3) var(--spacing-4);
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius-md);
        background-color: var(--surface-0);
        color: var(--text-color);
        font-size: var(--font-size-base);
        font-family: var(--font-family);
        line-height: 1.5;
        transition: all var(--transition-normal);
        appearance: none;
        cursor: pointer;
        box-sizing: border-box;

        &:focus {
          outline: none;
          border-color: var(--primary-500);
          box-shadow: 0 0 0 2px var(--primary-100);
        }

        &:disabled {
          background-color: var(--surface-100);
          color: var(--text-color-tertiary);
          cursor: not-allowed;
        }

        &.lib-form-field-invalid {
          border-color: var(--error-500);

          &:focus {
            border-color: var(--error-500);
            box-shadow: 0 0 0 2px var(--error-100);
          }
        }

        option {
          padding: var(--spacing-2);
        }

        option:disabled {
          color: var(--error-500);
          font-style: italic;
        }
      }

      .lib-form-field-select-icon {
        position: absolute;
        right: var(--spacing-4);
        top: 50%;
        transform: translateY(-50%);
        pointer-events: none;
        color: var(--text-color-secondary);
        font-size: var(--font-size-sm);
        z-index: 1;
      }
    }

    .lib-form-field-hint {
      font-size: var(--font-size-xs);
      color: var(--text-color-secondary);
      margin-top: var(--spacing-1);
    }

    .lib-form-field-error {
      font-size: var(--font-size-xs);
      color: var(--error-500);
      margin-top: var(--spacing-1);
    }
  }
}

// Responsive grid adjustments
@media (max-width: 768px) {
  .lib-form-field {
    &.lib-form-field-col-1,
    &.lib-form-field-col-2,
    &.lib-form-field-col-3,
    &.lib-form-field-col-4,
    &.lib-form-field-col-5,
    &.lib-form-field-col-6,
    &.lib-form-field-col-7,
    &.lib-form-field-col-8,
    &.lib-form-field-col-9,
    &.lib-form-field-col-10,
    &.lib-form-field-col-11,
    &.lib-form-field-col-12 {
      grid-column: span 12; // Full width on mobile
    }
  }
}

